name: Lumen
version: 2.1
status: stable-core
role: general_purpose_language

specification_basis:
  - lumen.yaml v2.0
  - minimal kernel primitives
  - explicit semantics over syntax

philosophy:
  principles:
    - semantic_clarity
    - minimalism
    - determinism
    - explicit_control_flow
    - immutable_by_default
  non_goals:
    - implicit_magic
    - hidden_state
    - context_sensitive_semantics

# -------------------------------------------------------------------
# KERNEL
# -------------------------------------------------------------------

kernel:
  execution_model:
    type: sequential
    evaluation_order: explicit
    determinism: guaranteed

  primitives:
    # Core execution
    - sequence     # execute instructions in order
    - block        # push/pop scope, execute sequence
    - assign       # bind or mutate a symbol
    - call         # invoke function or external
    - return       # exit function with value

    # Control flow
    - branch       # conditional execution
    - loop         # iterative execution
    - jump         # break / continue

    # Computation
    - operate      # unary/binary operator dispatch

  signals:
    jump:
      - break
      - continue
    termination:
      - return

# -------------------------------------------------------------------
# LEXICAL & STRUCTURAL RULES
# -------------------------------------------------------------------

lexical:
  keywords:
    - let
    - mut
    - if
    - else
    - while
    - break
    - continue
    - return
    - fn
    - extern
    - true
    - false
    - none
    - and
    - or
    - not

  operators:
    arithmetic: ["+", "-", "*", "/", "%", "**"]
    comparison: ["==", "!=", "<", ">", "<=", ">="]
    logical: ["and", "or", "not"]
    assignment: ["="]
    composition: ["|>"]

structure:
  indentation:
    mode: fixed
    size: 4
  blocks:
    open: ":"
    close: DEDENT
  statement_termination: newline

# -------------------------------------------------------------------
# TYPES
# -------------------------------------------------------------------

types:
  system:
    primitive:
      number: "64-bit float"
      boolean: ["true", "false"]
      string: "UTF-8"
      none: "unit"
    composite:
      tuple:
        ordered: true
        heterogeneous: true

  properties:
    typing:
      static: true
      inferred: true
    mutability:
      default: immutable
      explicit_keyword: mut
    nullability:
      explicit: none

  planned:
    - option
    - result
    - struct
    - enum

# -------------------------------------------------------------------
# VARIABLES & FUNCTIONS
# -------------------------------------------------------------------

variables:
  binding:
    syntax: "let [mut] name [: Type] = value"
  scope:
    levels:
      - module
      - function
    block_local: false

functions:
  definition:
    syntax: "fn name(params) [-> Type]"
  purity:
    default: impure
    annotation_supported: false
  recursion:
    allowed: true

# -------------------------------------------------------------------
# CONTROL FLOW
# -------------------------------------------------------------------

control_flow:
  branching:
    forms:
      - if
      - if_else
  looping:
    forms:
      - while
  jump:
    break: true
    continue: true
    return: true

# -------------------------------------------------------------------
# FOREIGN INTERFACE
# -------------------------------------------------------------------

foreign_interface:
  extern:
    enabled: true
    typed: optional
    safety_boundary: explicit

# -------------------------------------------------------------------
# ERRORS
# -------------------------------------------------------------------

errors:
  philosophy:
    - explicit
    - fail_fast
  current:
    mechanism: runtime_error
  planned:
    - result_type

# -------------------------------------------------------------------
# SEMANTIC GUARANTEES
# -------------------------------------------------------------------

semantics:
  undefined_behavior: none
  side_effects: explicit
  portability: implementation_independent

backward_compatibility:
  preserves:
    - lumen.yaml v2.0

future_reserved_keywords:
  - match
  - case
  - for
  - struct
  - enum
  - trait
