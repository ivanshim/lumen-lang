# Numeric Parsing Examples
# Demonstrates parse_int, int_to_decimal_string

print("=== Integer Parsing ===")
print("")

# Parse integers from strings
print("Parsing integers from strings:")
print("  parse_int('0'): " . str(parse_int("0")))             # 0
print("  parse_int('42'): " . str(parse_int("42")))           # 42
print("  parse_int('123'): " . str(parse_int("123")))         # 123
print("  parse_int('999'): " . str(parse_int("999")))         # 999
print("  parse_int('2025'): " . str(parse_int("2025")))       # 2025
print("")

# Convert integers to strings
print("Converting integers to strings:")
print("  int_to_decimal_string(0): '" . int_to_decimal_string(0) . "'")       # '0'
print("  int_to_decimal_string(42): '" . int_to_decimal_string(42) . "'")     # '42'
print("  int_to_decimal_string(123): '" . int_to_decimal_string(123) . "'")   # '123'
print("  int_to_decimal_string(999): '" . int_to_decimal_string(999) . "'")   # '999'
print("  int_to_decimal_string(2025): '" . int_to_decimal_string(2025) . "'") # '2025'
print("")

# Round-trip conversion
print("Round-trip conversion (string -> int -> string):")
let test_strings = ["7", "42", "100", "999"]
let i = 0
while i < len(test_strings)
    let s = test_strings[i]
    let n = parse_int(s)
    let back = int_to_decimal_string(n)
    print("  '" . s . "' -> " . str(n) . " -> '" . back . "'")
    i = i + 1
print("")

# Practical example: simple calculator
print("=== Practical Example: Simple Addition Calculator ===")

fn add_from_strings(a_str, b_str)
    if not is_numeric_string(a_str)
        print("  ERROR: '" . a_str . "' is not a valid number")
        return null
    if not is_numeric_string(b_str)
        print("  ERROR: '" . b_str . "' is not a valid number")
        return null

    let a = parse_int(a_str)
    let b = parse_int(b_str)
    let sum = a + b
    let result_str = int_to_decimal_string(sum)

    print("  " . a_str . " + " . b_str . " = " . result_str)
    return sum

add_from_strings("10", "20")
add_from_strings("42", "8")
add_from_strings("100", "200")
add_from_strings("abc", "10")  # Error case
print("")

# Practical example: counting digits
print("=== Practical Example: Counting Digits ===")

fn count_digits(n)
    if n == 0
        return 1
    let s = int_to_decimal_string(n)
    len(s)

let numbers = [0, 5, 42, 100, 999, 12345]
let i = 0
while i < len(numbers)
    let n = numbers[i]
    let digits = count_digits(n)
    print("  " . str(n) . " has " . str(digits) . " digits")
    i = i + 1
print("")

# Practical example: sum of digits
print("=== Practical Example: Sum of Digits ===")

fn sum_of_digits(n)
    let s = int_to_decimal_string(n)
    let sum = 0
    let i = 0
    while i < len(s)
        let digit_char = char_at(s, i)
        let digit = parse_int(digit_char)
        sum = sum + digit
        i = i + 1
    sum

let numbers = [123, 456, 999, 12345]
let i = 0
while i < len(numbers)
    let n = numbers[i]
    let digit_sum = sum_of_digits(n)
    print("  Sum of digits in " . str(n) . ": " . str(digit_sum))
    i = i + 1
