# Comprehensive test for numeric decomposition primitives
print("=== Comprehensive Decomposition Tests ===")
print("")

# Test 1: num() and den() extract exact numerator/denominator
print("Test 1: num() and den() on RATIONAL")
r1 = 22/7
print(r1)
write("num = ")
print(num(r1))
write("den = ")
print(den(r1))

r2 = 355/113
print(r2)
write("num = ")
print(num(r2))
write("den = ")
print(den(r2))

r3 = 1/3
print(r3)
write("num = ")
print(num(r3))
write("den = ")
print(den(r3))

print("")

# Test 2: int() and frac() extract parts
print("Test 2: int() and frac() on REAL")
x1 = 3.14159
print(x1)
write("int = ")
print(int(x1))
write("frac = ")
print(frac(x1))

x2 = 10.5
print(x2)
write("int = ")
print(int(x2))
write("frac = ")
print(frac(x2))

x3 = 0.125
print(x3)
write("int = ")
print(int(x3))
write("frac = ")
print(frac(x3))

print("")

# Test 3: Verify int(x) + frac(x) == x
print("Test 3: Verify int(x) + frac(x) == x")
x = 2.718
print(x)
i = int(x)
f = frac(x)
sum = real_default(i) + f
write("real_default(int(x)) + frac(x) = ")
print(sum)

print("")

# Test 4: Reconstruct rational from num/den
print("Test 4: Reconstruct rational")
r = 7/12
print(r)
n = num(r)
d = den(r)
reconstructed = n / d
write("num(r)/den(r) = ")
print(reconstructed)

print("")

# Test 5: Edge cases
print("Test 5: Edge cases")

# Zero integer part
x = 0.5
write("x=0.5: int=")
print(int(x))
write("frac=")
print(frac(x))

# Zero fractional part
x = 5.0
write("x=5.0: int=")
print(int(x))
write("frac=")
print(frac(x))

# Negative rational
r = -22/7
write("r=-22/7: num=")
print(num(r))
write("den=")
print(den(r))

# Large numbers
r = 1000000/333333
write("r=1000000/333333: num=")
print(num(r))
write("den=")
print(den(r))

print("")

# Test 6: With base-N literals
print("Test 6: Base-N literals")
x = 16@A.8
write("16@A.8 = ")
print(x)
write("int = ")
print(int(x))
write("frac = ")
print(frac(x))

r = 2@101 / 2@11
write("2@101/2@11 = ")
print(r)
write("num = ")
print(num(r))
write("den = ")
print(den(r))

print("")

# Test 7: Verify kinds of results
print("Test 7: Kinds verification")
write("kind(num(1/2)) = ")
print(kind_to_string(kind(num(1/2))))

write("kind(den(1/2)) = ")
print(kind_to_string(kind(den(1/2))))

write("kind(int(3.14)) = ")
print(kind_to_string(kind(int(3.14))))

write("kind(frac(3.14)) = ")
print(kind_to_string(kind(frac(3.14))))

print("")

# Test 8: Multiple decompositions
print("Test 8: Multiple decompositions")
x = 123.456
i1 = int(x)
f1 = frac(x)
write("x = ")
print(x)
write("int(x) = ")
print(i1)
write("frac(x) = ")
print(f1)

# Decompose the fractional part again (should give 0 + frac)
i2 = int(f1)
f2 = frac(f1)
write("int(frac(x)) = ")
print(i2)
write("frac(frac(x)) = ")
print(f2)

print("")
print("All tests completed!")
