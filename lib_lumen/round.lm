# Round x to specified decimal places using round-half-away-from-zero
fn round(x, decimals)
    scale = 1
    i = 0
    while i < decimals
        scale = scale * 10
        i = i + 1

    y = x * scale

    if y >= 0
        r = (y * 2 + 1) // 2
    else
        r = (y * 2 - 1) // 2

    r / scale
